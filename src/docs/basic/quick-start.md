---
editLink: true
outline: "deep"
---

# å¿«é€Ÿå¼€å§‹

æˆ‘ä»¬åŸºäº Rust å®ç°äº†ä¸€ä¸ªç®€å•çš„è„šæ‰‹æ¶å·¥å…·ï¼Œæä¾›äº†ç±»ä¼¼äºåˆå§‹åŒ–ï¼Œæ„å»ºç­‰å‘½ä»¤ã€‚

æˆ‘ä»¬ç°åœ¨å¼€å§‹ä¸€æ­¥æ­¥ä»‹ç»å¦‚ä½•åŸºäº ohos-rs å¼€å‘ä¸€ä¸ªé¸¿è’™åŸç”Ÿæ¨¡å—ã€‚

## ç¯å¢ƒå‡†å¤‡

åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… `Rust` å’Œ `HarmonyOS NDK`.

### Rust

å¯¹äº Rust æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å®˜æ–¹æä¾›çš„å®‰è£…è„šæœ¬æ¥å®ç°å®‰è£…ã€‚

```shell
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

::: tip ğŸŒˆ
1. ä½ éœ€è¦ç¡®ä¿ä½ å®‰è£…çš„ Rust ç‰ˆæœ¬æ˜¯ >= 1.78.0 çš„
2. æ›´å¤šå…³äº Rust çš„ä¿¡æ¯å’ŒçŸ¥è¯†ç‚¹ï¼Œä½ å¯ä»¥è®¿é—® [link](https://www.rust-lang.org/learn/get-started)
:::

ç„¶åæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€äº› Rust çš„ toolchain æ¥å¸®åŠ©æˆ‘ä»¬æ„å»ºé¸¿è’™çš„åŸç”Ÿæ¨¡å—ã€‚

```shell
rustup target add aarch64-unknown-linux-ohos
rustup target add armv7-unknown-linux-ohos
rustup target add x86_64-unknown-linux-ohos
```
   
### HarmonyOS NDK

::: tip
å¯¹äºæœ€æ–°çš„ ohos-rs ç‰ˆæœ¬ï¼Œé¸¿è’™ NDK çš„ç‰ˆæœ¬éœ€è¦æ˜¯ `DevEco Studio NEXT Developer Beta1 (5.0.3.100)` æˆ–è€…æ›´æ–°.
:::

ä½ åªéœ€è¦ä¸‹è½½æœ€æ–°çš„ `DevEco-Studio` ç„¶åå®‰è£…å¯¹åº”çš„ NDK å³å¯. ä½ å¯ä»¥åœ¨ [å®˜æ–¹ç½‘ç«™](https://developer.huawei.com/consumer/cn/deveco-studio/) æ‰¾åˆ°å¹¶ä¸”ä¸‹è½½ã€‚

ä¸‹è½½å®Œæˆä¹‹åï¼Œä½ éœ€è¦ä¸ºç³»ç»Ÿè®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡æ¥å¸®åŠ©æˆ‘ä»¬æ„å»ºåŸç”Ÿæ¨¡å—ã€‚å‡è®¾ä½ å®‰è£…çš„ SDK è·¯å¾„ä¸º `/path/Sdk`ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦è®¾ç½®å¦‚ä¸‹çš„ç¯å¢ƒå˜é‡å³å¯ï¼š

```shell
# ä¸€èˆ¬æ¥è¯´ SDK ç›®å½•ä¸‹é¢éƒ½æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œé€‰æ‹©ä½ è‡ªå·±éœ€è¦ä½¿ç”¨çš„ç‰ˆæœ¬å³å¯ã€‚
# å¯¹äº unix ç³»ç»Ÿçš„ç”¨æˆ·æ¥è¯´è¯·åŠ¡å¿…ä½¿ç”¨ export å¦åˆ™ä¼šå¯¼è‡´è¯»å–ä¸åˆ°ç¯å¢ƒå˜é‡
export OHOS_NDK_HOME=/path/Sdk/9/

# å¯¹äº 5.0.0 release çš„ IDE æ¥è¯´ä»–çš„è·¯å¾„ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š
export OHOS_NDK_HOME=/Applications/DevEco-Studio.app/Contents/sdk/default/openharmony
```

è®¾ç½®å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•æŸ¥çœ‹ç¯å¢ƒå˜é‡çš„å†…å®¹ï¼Œæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š

![ndk](assets/ndk.png)

## å®‰è£…

ç°åœ¨ä½ å¯ä»¥ç”¨ `cargo` æ¥å®‰è£…è„šæ‰‹æ¶å·¥å…·äº†ã€‚

```shell
cargo install ohrs
```

## ç®€å•çš„é¡¹ç›®ç¤ºä¾‹

ä½¿ç”¨ `ohrs` æ¥åˆå§‹åŒ–é¡¹ç›®ã€‚

```shell
ohrs init hello
```

ä¹‹åä½¿ç”¨ `ohrs` æ¥æ„å»ºé¡¹ç›®

```shell
ohrs build
```

## IDE æç¤º

å¯¹äºå‡çº§åˆ° `1.0.0` ç‰ˆæœ¬çš„é¡¹ç›®æ¥è¯´ï¼Œå¯èƒ½ä¼šé‡åˆ°æŸäº›èƒ½åŠ›æˆ–è€… API ä¸æ”¯æŒçš„æƒ…å†µã€‚è¿™æ˜¯å› ä¸º `rust-analyzer` åœ¨é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨æœ¬æœºçš„ target ä½œä¸ºé»˜è®¤çš„æ„å»º targetã€‚ä¸ºäº†é¿å…å‡ºç°è¿™ç§é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ rust-analyzer çš„é»˜è®¤æ„å»ºäº§ç‰©ä¸ºé¸¿è’™çš„äº§ç‰©ï¼Œä»¥ VS Code ä¸ºä¾‹å…¶é…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š

```json
// .vscode/settings.json
{
    "rust-analyzer.cargo.target": "aarch64-unknown-linux-ohos"
}
```
